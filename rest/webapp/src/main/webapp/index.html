<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Office Assassin</title>

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="css/bootstrap.css" rel="stylesheet" media="screen">

    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="css/assassin.css">

</head>
<body>

  <script type="text/x-handlebars" src="templates/main.hbs">
      {{partial "navbar"}}
      <div class="container assassin_content">
          {{outlet}}
      </div>
  </script>

  <script type="text/x-handlebars" data-template-name="index">
    {{#if Assassin.loggedIn}}
      Hi {{Assassin.user.emailAddress}} - your signed in!
    {{else}}
      Hi there - enroll, sign in or go away
    {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="_navbar">
      <div class="navbar navbar-inverse navbar-fixed-top">
          <div class="container">
              <div class="navbar-header">
                  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                      {{#each navigation}}
                      {{#if enabled}}
                          <span class="icon-bar"></span>
                      {{/if}}
                      {{/each}}
                  </button>
                  <a class="navbar-brand" href="#">Office Assassin</a>
              </div>
              <div class="collapse navbar-collapse">
                  <ul class="nav navbar-nav">
                      {{#each navigation}}
                      {{#if enabled}}
                          <li {{bind-attr class="active"}}>{{#linkTo route}}{{label}}{{/linkTo}}</li>
                      {{/if}}
                      {{/each}}
                  </ul>
                  <form class="navbar-form navbar-right">
                      {{render "login"}}
                  </form>
              </div>
          </div>
      </div>
  </script>

  <script type="text/x-handlebars" data-template-name="login">
      {{#if Assassin.loggedIn}}
          <button type="submit" class="btn btn-success" {{action logout}} {{bind-attr disabled=cantSubmit}}>Log Out</button>
      {{else}}
          <div class="form-group">
              {{input type="text" placeholder="Email" class="form-control" value=emailAddress}}
          </div>
          <div class="form-group">
              {{input type="password" placeholder="Password" class="form-control" value=password}}
          </div>
          <button type="submit" class="btn btn-success" {{action login}} {{bind-attr disabled=cantSubmit}}>Sign in</button>
      {{/if}}
  </script>

  <script type="text/x-handlebars" data-template-name="enlist">

      <form class="form-enlist">
          <h2 class="form-enlist-heading">Recruit Information</h2>

          {{#if hasFailures}}
          <div class="alert alert-dismissable alert-danger">
              <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
              <ul>
              {{#each errors.generalFailures}}
                  <li>{{message}}</li>
              {{/each}}
              {{#each errors.fieldFailures}}
                  <!-- todo link to {{field}} focus-->
                  <li><a class="alert-link" {{action focusField field href=true}}>{{message}}</a></li>
              {{/each}}
              </ul>
          </div>
          {{/if}}

          <div {{bind-attr class="hasFailureEmailAddress:has-error"}}>
            {{input id="in_emailAddress" type="email" class="form-control" placeholder="Email address" field="emailAddress" value=model.emailAddress}}
          </div>
          <div {{bind-attr class="hasFailureHandle:has-error"}}>
            {{input id="in_handle" type="text" class="form-control" placeholder="Handle" value=model.handle}}
          </div>
          <div {{bind-attr class="hasFailureFullName:has-error"}}>
            {{input id="in_fullName" type="text" class="form-control optional" placeholder="Full Name (optional)" value=model.fullName}}
          </div>
          <div {{bind-attr class="hasFailurePassword:has-error"}}>
            {{input id="in_password" type="password" class="form-control" placeholder="Password" value=model.password}}
          </div>
          <div {{bind-attr class="hasFailurePasswordConfirm:has-error"}}>
            {{input id="in_passwordConfirm" type="password" class="form-control" placeholder="Confirm Password" value=passwordConfirm}}
          </div>
          <label class="checkbox">
              {{input type="checkbox" checked=termsAccepted}} I acknowledge that by enlisting I agree to be randomly shot by nerf darts
          </label>

          <button class="btn btn-lg btn-primary btn-block" type="submit" {{action save}} {{bind-attr disabled=cantSubmit}}>Enlist</button>
      </form>


  </script>

  <script src="js/libs/jquery-1.9.1.js"></script>
  <script src="js/libs/handlebars-1.0.0.js"></script>
  <script src="js/libs/ember-1.0.0.js"></script>
  <script src="js/libs/bootstrap.js"></script>

  <script src="js/models/serializable.js"></script>
  <script src="js/models/navItem.js"></script>
  <script src="js/models/user.js"></script>
  <script src="js/models/errors.js"></script>

  <script src="js/app.js"></script>
  <script src="js/router.js"></script>

  <script src="js/routes/enlistRoute.js"></script>

  <script src="js/controllers/assassinSubmitter.js"></script>
  <script src="js/controllers/enlistController.js"></script>
  <script src="js/controllers/loginController.js"></script>
</body>
</html>
